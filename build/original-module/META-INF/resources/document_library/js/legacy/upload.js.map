{"version":3,"sources":["../../../../../../../src/main/resources/META-INF/resources/document_library/js/legacy/upload.js"],"names":["AUI","add","A","AArray","Array","ANode","Node","Lang","LString","String","UploaderQueue","Uploader","Queue","isNumber","isString","sub","CSS_ACTIVE_AREA","CSS_APP_VIEW_ENTRY","CSS_DISPLAY_DESCRIPTIVE","CSS_DISPLAY_ICON","CSS_ENTRIES_EMPTY","CSS_ENTRY_DISPLAY_STYLE","CSS_ENTRY_LINK","CSS_ENTRY_SELECTOR","CSS_ICON","CSS_SEARCHCONTAINER","CSS_TAGLIB_ICON","CSS_TAGLIB_TEXT","CSS_UPLOAD_ERROR","CSS_UPLOAD_SUCCESS","CSS_UPLOAD_WARNING","DOC","config","doc","ERROR_RESULTS_MIXED","PATH_THEME_IMAGES","themeDisplay","getPathThemeImages","REGEX_AUDIO","REGEX_COMPRESSED","REGEX_IMAGE","REGEX_VIDEO","SELECTOR_DATA_FOLDER","SELECTOR_DATA_FOLDER_DATA_TITLE","STR_DOT","SELECTOR_DISPLAY_DESCRIPTIVE","SELECTOR_DISPLAY_ICON","SELECTOR_ENTRIES_EMPTY","SELECTOR_ENTRY_DISPLAY_STYLE","SELECTOR_ENTRY_LINK","SELECTOR_IMAGE_ICON","SELECTOR_SEARCH_CONTAINER","SELECTOR_TAGLIB_ICON","STR_BLANK","STR_BOUNDING_BOX","STR_CONTENT_BOX","STR_EXTENSION_PDF","STR_FIRST","STR_FOLDER_ID","STR_HOST","STR_LABEL","STR_LIST","STR_NAME","STR_NAVIGATION_OVERLAY_BACKGROUND","STR_SIZE","STR_SPACE","STR_THUMBNAIL_EXTENSION","STR_THUMBNAIL_DEFAULT","STR_THUMBNAIL_PDF","STR_THUMBNAIL_AUDIO","STR_THUMBNAIL_COMPRESSED","STR_THUMBNAIL_VIDEO","STR_THUMBNAIL_PATH","TPL_ENTRIES_CONTAINER","TPL_ENTRY_ROW_TITLE","Liferay","Util","getLexiconIconTpl","TPL_ENTRY_WRAPPER","TPL_ERROR_FOLDER","Template","TPL_HIDDEN_CHECK_BOX","TPL_IMAGE_THUMBNAIL","getPathContext","DocumentLibraryUpload","Component","create","ATTRS","appViewEntryTemplates","validator","one","value","columnNames","setter","val","push","unshift","isArray","dimensions","displayStyle","entriesContainer","folderId","getter","instance","get","getFolderId","readonly","toInt","maxFileSize","PropsValues","UPLOAD_SERVLET_REQUEST_IMPL_MAX_SIZE","redirect","scopeGroupId","uploadURL","viewFileEntryURL","EXTENDS","Plugin","Base","NAME","NS","prototype","_addFilesToQueueBottom","files","queue","_getUploader","forEach","item","addToQueueBottom","_attachSubscriptions","data","handles","_handles","_getDisplayStyle","uploader","folder","on","_showFolderUploadComplete","_showFolderUploadProgress","_detectFolderUploadError","_showFolderUploadStarting","after","_showFileUploadStarting","_showFileUploadComplete","_showFileUploadProgress","_bindDragDropUI","docElement","documentElement","_entriesContainer","host","getWin","_node","onbeforeunload","bind","onDataRequestHandle","ns","_onDataRequest","removeCssClassTask","debounce","removeClass","onDragOverHandle","event","dataTransfer","_event","types","dataTransferTypes","indexOf","halt","dropEffect","addClass","target","toggleClass","compareTo","contains","onDropHandle","delegate","dragDropFiles","fileList","map","FileHTML5","fire","entriesDragDelegateHandle","parentElement","ancestor","type","entriesClickDelegateHandle","preventDefault","_eventHandles","_combineFileLists","queuedFiles","_confirmUnload","_isUploading","Language","_createEntriesContainer","searchContainer","containerClasses","cssClass","prepend","_createEntryNode","name","size","entryNode","_createEntryRow","entriesContainerSelector","invisibleEntry","_invisibleDescriptiveEntry","hiddenCheckbox","_invisibleIconEntry","clone","append","entryLink","entryTitle","attr","setContent","_removeEmptyResultsMessage","searchContainerWrapper","show","id","guid","entryNodeWrapper","title","scrollIntoView","searchContainerNode","SearchContainer","columnValues","_columnNames","index","formatStorage","row","addRow","_createOverlay","background","overlay","OverlayMask","render","_createProgressBar","height","width","ProgressBar","complete","set","valueChange","newVal","_createUploadStatus","file","progressBar","_decodeURI","decodeURI","_destroyEntry","currentUploadData","_getCurrentUploadData","destroy","invoke","_detachSubscriptions","length","response","_getUploadResponse","error","errorMessage","message","invalidFiles","_displayEntryError","node","imageIcon","_displayError","tooltipDelegate","_tooltipDelegate","TooltipDelegate","formatter","_formatTooltip","trigger","visible","_displayResult","resultsNode","uploadResultClass","tooltip","dataSet","_getDataSet","_dataSet","DataSet","style","_displayStyle","_getEmptyMessage","emptyMessage","_emptyMessage","_getFolderEntryNode","folderEntry","overlayContentBox","hasClass","Widget","getByNode","_originalConfig","_getMediaThumbnail","fileName","thumbnailName","test","_scopeGroupId","endsWith","toLowerCase","_getNavigationOverlays","navigationOverlays","_navigationOverlays","createNavigationOverlay","_getTargetFolderId","responseData","JSON","parse","e","isObject","status","fileEntryId","_getUploadStatus","key","_getUploadURL","_uploadURL","addParams","ts","Date","now","_uploader","appendNewFiles","fileFieldName","multipleFiles","simLimit","hide","_startNextUpload","_onFileSelect","numberOfUploads","Object","isEmpty","currentFiles","_currentState","UPLOADING","details","filesPartition","_validateFiles","_updateStatusUI","_queueSelectedFiles","_positionProgressBar","progressBarBoundingBox","center","keyData","validFiles","matches","_updateDataSetEntry","folderNode","rejects","_startUpload","getAttribute","emptyResultsMessage","fileNode","hasErrors","displayStyleList","_updateThumbnail","_updateFileLink","_updateFileHiddenInput","_updateProgress","percentLoaded","uploadData","totalFilesLength","invalidFilesLength","validFilesLength","removeAt","uploadThese","unmergedData","replace","inputNode","selector","link","all","Math","ceil","folderEntryNode","folderEntryNodeOverlay","imageNode","thumbnailPath","divNode","setStyle","_maxFileSize","partition","strings","_strings","invalidFileSize","zeroByteFile","destructor","EventHandle","detach","initializer","_dimensions","requires"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) 2000-present Liferay, Inc. All rights reserved.\n *\n * This library is free software; you can redistribute it and/or modify it under\n * the terms of the GNU Lesser General Public License as published by the Free\n * Software Foundation; either version 2.1 of the License, or (at your option)\n * any later version.\n *\n * This library is distributed in the hope that it will be useful, but WITHOUT\n * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS\n * FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more\n * details.\n */\n\nAUI.add(\n\t'document-library-upload',\n\tA => {\n\t\tvar AArray = A.Array;\n\t\tvar ANode = A.Node;\n\t\tvar Lang = A.Lang;\n\t\tvar LString = Lang.String;\n\t\tvar UploaderQueue = A.Uploader.Queue;\n\n\t\tvar isNumber = Lang.isNumber;\n\t\tvar isString = Lang.isString;\n\n\t\tvar sub = Lang.sub;\n\n\t\tvar CSS_ACTIVE_AREA = 'active-area';\n\n\t\tvar CSS_APP_VIEW_ENTRY = 'app-view-entry-taglib';\n\n\t\tvar CSS_DISPLAY_DESCRIPTIVE = 'display-descriptive';\n\n\t\tvar CSS_DISPLAY_ICON = 'display-icon';\n\n\t\tvar CSS_ENTRIES_EMPTY = 'entries-empty';\n\n\t\tvar CSS_ENTRY_DISPLAY_STYLE = 'entry-display-style';\n\n\t\tvar CSS_ENTRY_LINK = CSS_ENTRY_DISPLAY_STYLE + ' a';\n\n\t\tvar CSS_ENTRY_SELECTOR = 'entry-selector';\n\n\t\tvar CSS_ICON = 'icon';\n\n\t\tvar CSS_SEARCHCONTAINER = 'searchcontainer';\n\n\t\tvar CSS_TAGLIB_ICON = 'taglib-icon';\n\n\t\tvar CSS_TAGLIB_TEXT = 'taglib-text';\n\n\t\tvar CSS_UPLOAD_ERROR = 'upload-error';\n\n\t\tvar CSS_UPLOAD_SUCCESS = 'upload-success';\n\n\t\tvar CSS_UPLOAD_WARNING = 'upload-warning';\n\n\t\tvar DOC = A.config.doc;\n\n\t\tvar ERROR_RESULTS_MIXED = 1;\n\n\t\tvar PATH_THEME_IMAGES = themeDisplay.getPathThemeImages();\n\n\t\tvar REGEX_AUDIO = /\\.(aac|auif|bwf|flac|mp3|mp4|m4a|wav|wma)$/i;\n\n\t\tvar REGEX_COMPRESSED = /\\.(dmg|gz|tar|tgz|zip)$/i;\n\n\t\tvar REGEX_IMAGE = /\\.(bmp|gif|jpeg|jpg|png|tiff)$/i;\n\n\t\tvar REGEX_VIDEO = /\\.(avi|flv|mpe|mpg|mpeg|mov|m4v|ogg|wmv)$/i;\n\n\t\tvar SELECTOR_DATA_FOLDER = '[data-folder=\"true\"]';\n\n\t\tvar SELECTOR_DATA_FOLDER_DATA_TITLE =\n\t\t\t'[data-folder=\"true\"][data-title]';\n\n\t\tvar STR_DOT = '.';\n\n\t\tvar SELECTOR_DISPLAY_DESCRIPTIVE = STR_DOT + CSS_DISPLAY_DESCRIPTIVE;\n\n\t\tvar SELECTOR_DISPLAY_ICON = STR_DOT + CSS_DISPLAY_ICON;\n\n\t\tvar SELECTOR_ENTRIES_EMPTY = STR_DOT + CSS_ENTRIES_EMPTY;\n\n\t\tvar SELECTOR_ENTRY_DISPLAY_STYLE = STR_DOT + CSS_ENTRY_DISPLAY_STYLE;\n\n\t\tvar SELECTOR_ENTRY_LINK = STR_DOT + CSS_ENTRY_LINK;\n\n\t\tvar SELECTOR_IMAGE_ICON = 'img.icon';\n\n\t\tvar SELECTOR_SEARCH_CONTAINER = STR_DOT + CSS_SEARCHCONTAINER;\n\n\t\tvar SELECTOR_TAGLIB_ICON = STR_DOT + CSS_TAGLIB_ICON;\n\n\t\tvar STR_BLANK = '';\n\n\t\tvar STR_BOUNDING_BOX = 'boundingBox';\n\n\t\tvar STR_CONTENT_BOX = 'contentBox';\n\n\t\tvar STR_EXTENSION_PDF = '.pdf';\n\n\t\tvar STR_FIRST = 'first';\n\n\t\tvar STR_FOLDER_ID = 'folderId';\n\n\t\tvar STR_HOST = 'host';\n\n\t\tvar STR_LABEL = 'label';\n\n\t\tvar STR_LIST = 'list';\n\n\t\tvar STR_NAME = 'name';\n\n\t\tvar STR_NAVIGATION_OVERLAY_BACKGROUND = '#FFF';\n\n\t\tvar STR_SIZE = 'size';\n\n\t\tvar STR_SPACE = ' ';\n\n\t\tvar STR_THUMBNAIL_EXTENSION = '.png';\n\n\t\tvar STR_THUMBNAIL_DEFAULT = 'default' + STR_THUMBNAIL_EXTENSION;\n\n\t\tvar STR_THUMBNAIL_PDF = 'pdf' + STR_THUMBNAIL_EXTENSION;\n\n\t\tvar STR_THUMBNAIL_AUDIO = 'music' + STR_THUMBNAIL_EXTENSION;\n\n\t\tvar STR_THUMBNAIL_COMPRESSED = 'compressed' + STR_THUMBNAIL_EXTENSION;\n\n\t\tvar STR_THUMBNAIL_VIDEO = 'video' + STR_THUMBNAIL_EXTENSION;\n\n\t\tvar STR_THUMBNAIL_PATH = PATH_THEME_IMAGES + '/file_system/large/';\n\n\t\tvar TPL_ENTRIES_CONTAINER = '<ul class=\"{cssClass}\"></ul>';\n\n\t\tvar TPL_ENTRY_ROW_TITLE =\n\t\t\t'<span class=\"' +\n\t\t\tCSS_APP_VIEW_ENTRY +\n\t\t\tSTR_SPACE +\n\t\t\tCSS_ENTRY_DISPLAY_STYLE +\n\t\t\t'\">' +\n\t\t\t'<a class=\"' +\n\t\t\tCSS_TAGLIB_ICON +\n\t\t\t'\">' +\n\t\t\tLiferay.Util.getLexiconIconTpl('document') +\n\t\t\t'<span class=\"' +\n\t\t\tCSS_TAGLIB_TEXT +\n\t\t\t'\">{0}</span>' +\n\t\t\t'</a>' +\n\t\t\t'</span>';\n\n\t\tvar TPL_ENTRY_WRAPPER =\n\t\t\t'<li class=\"lfr-asset-item data-title=\"{title}\"></li>';\n\n\t\tvar TPL_ERROR_FOLDER = new A.Template(\n\t\t\t'<span class=\"lfr-status-success-label\">{validFilesLength}</span>',\n\n\t\t\t'<span class=\"lfr-status-error-label\">{invalidFilesLength}</span>',\n\n\t\t\t'<ul class=\"list-unstyled\">',\n\t\t\t'<tpl for=\"invalidFiles\">',\n\t\t\t'<li><b>{name}</b>: {errorMessage}</li>',\n\t\t\t'</tpl>',\n\t\t\t'</ul>'\n\t\t);\n\n\t\tvar TPL_HIDDEN_CHECK_BOX =\n\t\t\t'<input class=\"hide ' +\n\t\t\tCSS_ENTRY_SELECTOR +\n\t\t\t'\" name=\"{0}\" type=\"checkbox\" value=\"\">';\n\n\t\tvar TPL_IMAGE_THUMBNAIL =\n\t\t\tthemeDisplay.getPathContext() + '/documents/{0}/{1}/{2}';\n\n\t\tvar DocumentLibraryUpload = A.Component.create({\n\t\t\tATTRS: {\n\t\t\t\tappViewEntryTemplates: {\n\t\t\t\t\tvalidator: A.one,\n\t\t\t\t\tvalue: {}\n\t\t\t\t},\n\n\t\t\t\tcolumnNames: {\n\t\t\t\t\tsetter(val) {\n\t\t\t\t\t\tval.push(STR_BLANK);\n\t\t\t\t\t\tval.unshift(STR_BLANK);\n\n\t\t\t\t\t\treturn val;\n\t\t\t\t\t},\n\t\t\t\t\tvalidator: Array.isArray,\n\t\t\t\t\tvalue: []\n\t\t\t\t},\n\n\t\t\t\tdimensions: {\n\t\t\t\t\tvalue: {}\n\t\t\t\t},\n\n\t\t\t\tdisplayStyle: {\n\t\t\t\t\tvalidator: isString,\n\t\t\t\t\tvalue: STR_BLANK\n\t\t\t\t},\n\n\t\t\t\tentriesContainer: {\n\t\t\t\t\tvalidator: A.one,\n\t\t\t\t\tvalue: {}\n\t\t\t\t},\n\n\t\t\t\tfolderId: {\n\t\t\t\t\tgetter() {\n\t\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\t\treturn instance.get(STR_HOST).getFolderId();\n\t\t\t\t\t},\n\t\t\t\t\treadonly: true,\n\t\t\t\t\tsetter: Lang.toInt,\n\t\t\t\t\tvalidator: isNumber || isString,\n\t\t\t\t\tvalue: null\n\t\t\t\t},\n\n\t\t\t\tmaxFileSize: {\n\t\t\t\t\tvalidator(val) {\n\t\t\t\t\t\treturn isNumber(val) && val > 0;\n\t\t\t\t\t},\n\t\t\t\t\tvalue:\n\t\t\t\t\t\tLiferay.PropsValues.UPLOAD_SERVLET_REQUEST_IMPL_MAX_SIZE\n\t\t\t\t},\n\n\t\t\t\tredirect: {\n\t\t\t\t\tvalidator: isString,\n\t\t\t\t\tvalue: STR_BLANK\n\t\t\t\t},\n\n\t\t\t\tscopeGroupId: {\n\t\t\t\t\tvalidator: isNumber,\n\t\t\t\t\tvalue: null\n\t\t\t\t},\n\n\t\t\t\tuploadURL: {\n\t\t\t\t\tsetter: '_decodeURI',\n\t\t\t\t\tvalidator: isString,\n\t\t\t\t\tvalue: STR_BLANK\n\t\t\t\t},\n\n\t\t\t\tviewFileEntryURL: {\n\t\t\t\t\tsetter: '_decodeURI',\n\t\t\t\t\tvalidator: isString,\n\t\t\t\t\tvalue: STR_BLANK\n\t\t\t\t}\n\t\t\t},\n\t\t\tEXTENDS: A.Plugin.Base,\n\n\t\t\tNAME: 'documentlibraryupload',\n\n\t\t\tNS: 'upload',\n\n\t\t\tprototype: {\n\t\t\t\t_addFilesToQueueBottom(files) {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tvar queue = instance._getUploader().queue;\n\n\t\t\t\t\tfiles.forEach(item => {\n\t\t\t\t\t\tqueue.addToQueueBottom(item);\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\t_attachSubscriptions(data) {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tvar handles = instance._handles;\n\n\t\t\t\t\tvar displayStyle = instance._getDisplayStyle();\n\t\t\t\t\tvar uploader = instance._getUploader();\n\n\t\t\t\t\tif (data.folder) {\n\t\t\t\t\t\thandles.push(\n\t\t\t\t\t\t\tuploader.on(\n\t\t\t\t\t\t\t\t'alluploadscomplete',\n\t\t\t\t\t\t\t\tinstance._showFolderUploadComplete,\n\t\t\t\t\t\t\t\tinstance,\n\t\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t\t\tdisplayStyle\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tuploader.on(\n\t\t\t\t\t\t\t\t'totaluploadprogress',\n\t\t\t\t\t\t\t\tinstance._showFolderUploadProgress,\n\t\t\t\t\t\t\t\tinstance,\n\t\t\t\t\t\t\t\tdata\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tuploader.on(\n\t\t\t\t\t\t\t\t'uploadcomplete',\n\t\t\t\t\t\t\t\tinstance._detectFolderUploadError,\n\t\t\t\t\t\t\t\tinstance,\n\t\t\t\t\t\t\t\tdata\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tuploader.on(\n\t\t\t\t\t\t\t\t'uploadstart',\n\t\t\t\t\t\t\t\tinstance._showFolderUploadStarting,\n\t\t\t\t\t\t\t\tinstance,\n\t\t\t\t\t\t\t\tdata\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\thandles.push(\n\t\t\t\t\t\t\tuploader.after(\n\t\t\t\t\t\t\t\t'fileuploadstart',\n\t\t\t\t\t\t\t\tinstance._showFileUploadStarting,\n\t\t\t\t\t\t\t\tinstance\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tuploader.on(\n\t\t\t\t\t\t\t\t'uploadcomplete',\n\t\t\t\t\t\t\t\tinstance._showFileUploadComplete,\n\t\t\t\t\t\t\t\tinstance,\n\t\t\t\t\t\t\t\tdisplayStyle\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tuploader.on(\n\t\t\t\t\t\t\t\t'uploadprogress',\n\t\t\t\t\t\t\t\tinstance._showFileUploadProgress,\n\t\t\t\t\t\t\t\tinstance\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t_bindDragDropUI() {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tvar docElement = A.one(DOC.documentElement);\n\n\t\t\t\t\tvar entriesContainer = instance._entriesContainer;\n\n\t\t\t\t\tvar host = instance.get(STR_HOST);\n\n\t\t\t\t\tA.getWin()._node.onbeforeunload = A.bind(\n\t\t\t\t\t\t'_confirmUnload',\n\t\t\t\t\t\tinstance\n\t\t\t\t\t);\n\n\t\t\t\t\tvar onDataRequestHandle = Liferay.on(\n\t\t\t\t\t\thost.ns('dataRequest'),\n\t\t\t\t\t\tinstance._onDataRequest,\n\t\t\t\t\t\tinstance\n\t\t\t\t\t);\n\n\t\t\t\t\tvar removeCssClassTask = A.debounce(() => {\n\t\t\t\t\t\tdocElement.removeClass('upload-drop-intent');\n\t\t\t\t\t\tdocElement.removeClass('upload-drop-active');\n\t\t\t\t\t}, 500);\n\n\t\t\t\t\tvar onDragOverHandle = docElement.on('dragover', event => {\n\t\t\t\t\t\tvar dataTransfer = event._event.dataTransfer;\n\n\t\t\t\t\t\tif (dataTransfer && dataTransfer.types) {\n\t\t\t\t\t\t\tvar dataTransferTypes = dataTransfer.types || [];\n\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tAArray.indexOf(dataTransferTypes, 'Files') >\n\t\t\t\t\t\t\t\t\t-1 &&\n\t\t\t\t\t\t\t\tAArray.indexOf(\n\t\t\t\t\t\t\t\t\tdataTransferTypes,\n\t\t\t\t\t\t\t\t\t'text/html'\n\t\t\t\t\t\t\t\t) === -1\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tevent.halt();\n\n\t\t\t\t\t\t\t\tdataTransfer.dropEffect = 'copy';\n\n\t\t\t\t\t\t\t\tdocElement.addClass('upload-drop-intent');\n\n\t\t\t\t\t\t\t\tvar target = event.target;\n\n\t\t\t\t\t\t\t\tdocElement.toggleClass(\n\t\t\t\t\t\t\t\t\t'upload-drop-active',\n\t\t\t\t\t\t\t\t\ttarget.compareTo(entriesContainer) ||\n\t\t\t\t\t\t\t\t\t\tentriesContainer.contains(target)\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\tremoveCssClassTask();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tvar onDropHandle = docElement.delegate(\n\t\t\t\t\t\t'drop',\n\t\t\t\t\t\tevent => {\n\t\t\t\t\t\t\tvar dataTransfer = event._event.dataTransfer;\n\n\t\t\t\t\t\t\tif (dataTransfer) {\n\t\t\t\t\t\t\t\tvar dataTransferTypes =\n\t\t\t\t\t\t\t\t\tdataTransfer.types || [];\n\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\tAArray.indexOf(dataTransferTypes, 'Files') >\n\t\t\t\t\t\t\t\t\t\t-1 &&\n\t\t\t\t\t\t\t\t\tAArray.indexOf(\n\t\t\t\t\t\t\t\t\t\tdataTransferTypes,\n\t\t\t\t\t\t\t\t\t\t'text/html'\n\t\t\t\t\t\t\t\t\t) === -1\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tevent.halt();\n\n\t\t\t\t\t\t\t\t\tvar dragDropFiles = AArray(\n\t\t\t\t\t\t\t\t\t\tdataTransfer.files\n\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\tevent.fileList = dragDropFiles.map(item => {\n\t\t\t\t\t\t\t\t\t\treturn new A.FileHTML5(item);\n\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\tvar uploader = instance._getUploader();\n\n\t\t\t\t\t\t\t\t\tuploader.fire('fileselect', event);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t'body, .document-container, .overlaymask, .progressbar, [data-folder=\"true\"]'\n\t\t\t\t\t);\n\n\t\t\t\t\tvar entriesDragDelegateHandle = entriesContainer.delegate(\n\t\t\t\t\t\t['dragleave', 'dragover'],\n\t\t\t\t\t\tevent => {\n\t\t\t\t\t\t\tvar dataTransfer = event._event.dataTransfer;\n\n\t\t\t\t\t\t\tvar dataTransferTypes = dataTransfer.types;\n\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tAArray.indexOf(dataTransferTypes, 'Files') >\n\t\t\t\t\t\t\t\t\t-1 &&\n\t\t\t\t\t\t\t\tAArray.indexOf(\n\t\t\t\t\t\t\t\t\tdataTransferTypes,\n\t\t\t\t\t\t\t\t\t'text/html'\n\t\t\t\t\t\t\t\t) === -1\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tvar parentElement = event.target.ancestor(\n\t\t\t\t\t\t\t\t\t'[data-folder=\"true\"]'\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\tif (!parentElement) {\n\t\t\t\t\t\t\t\t\tparentElement = event.target;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tparentElement.toggleClass(\n\t\t\t\t\t\t\t\t\tCSS_ACTIVE_AREA,\n\t\t\t\t\t\t\t\t\tevent.type == 'dragover'\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tSELECTOR_DATA_FOLDER\n\t\t\t\t\t);\n\n\t\t\t\t\tvar entriesClickDelegateHandle = entriesContainer.delegate(\n\t\t\t\t\t\t'click',\n\t\t\t\t\t\tevent => {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tSTR_DOT +\n\t\t\t\t\t\t\tCSS_UPLOAD_ERROR +\n\t\t\t\t\t\t\tSTR_SPACE +\n\t\t\t\t\t\t\tSELECTOR_ENTRY_LINK\n\t\t\t\t\t);\n\n\t\t\t\t\tinstance._eventHandles = [\n\t\t\t\t\t\tonDataRequestHandle,\n\t\t\t\t\t\tonDragOverHandle,\n\t\t\t\t\t\tonDropHandle,\n\t\t\t\t\t\tentriesDragDelegateHandle,\n\t\t\t\t\t\tentriesClickDelegateHandle\n\t\t\t\t\t];\n\t\t\t\t},\n\n\t\t\t\t_combineFileLists(fileList, queuedFiles) {\n\t\t\t\t\tqueuedFiles.forEach(item => {\n\t\t\t\t\t\tfileList.push(item);\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\t_confirmUnload() {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tif (instance._isUploading()) {\n\t\t\t\t\t\treturn Liferay.Language.get(\n\t\t\t\t\t\t\t'uploads-are-in-progress-confirmation'\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t_createEntriesContainer(searchContainer, displayStyle) {\n\t\t\t\t\tvar containerClasses =\n\t\t\t\t\t\t'display-style-descriptive tabular-list-group';\n\n\t\t\t\t\tif (displayStyle === CSS_ICON) {\n\t\t\t\t\t\tcontainerClasses =\n\t\t\t\t\t\t\t'display-style-icon list-unstyled row';\n\t\t\t\t\t}\n\n\t\t\t\t\tvar entriesContainer = ANode.create(\n\t\t\t\t\t\tLang.sub(TPL_ENTRIES_CONTAINER, {\n\t\t\t\t\t\t\tcssClass: containerClasses\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\n\t\t\t\t\tsearchContainer\n\t\t\t\t\t\t.one('.searchcontainer-content')\n\t\t\t\t\t\t.prepend(entriesContainer);\n\n\t\t\t\t\treturn entriesContainer;\n\t\t\t\t},\n\n\t\t\t\t_createEntryNode(name, size, displayStyle) {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tvar entryNode;\n\n\t\t\t\t\tvar entriesContainer = instance.get('entriesContainer');\n\n\t\t\t\t\tvar searchContainer = entriesContainer.one(\n\t\t\t\t\t\tSELECTOR_SEARCH_CONTAINER\n\t\t\t\t\t);\n\n\t\t\t\t\tif (displayStyle === STR_LIST) {\n\t\t\t\t\t\tentriesContainer = searchContainer.one('tbody');\n\n\t\t\t\t\t\tentryNode = instance._createEntryRow(name, size);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tvar entriesContainerSelector =\n\t\t\t\t\t\t\t'ul.tabular-list-group:last-of-type';\n\n\t\t\t\t\t\tif (displayStyle === CSS_ICON) {\n\t\t\t\t\t\t\tentriesContainerSelector =\n\t\t\t\t\t\t\t\t'ul.list-unstyled:last-of-type';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tentriesContainer =\n\t\t\t\t\t\t\tentriesContainer.one(entriesContainerSelector) ||\n\t\t\t\t\t\t\tinstance._createEntriesContainer(\n\t\t\t\t\t\t\t\tentriesContainer,\n\t\t\t\t\t\t\t\tdisplayStyle\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\tvar invisibleEntry =\n\t\t\t\t\t\t\tinstance._invisibleDescriptiveEntry;\n\n\t\t\t\t\t\tvar hiddenCheckbox = sub(TPL_HIDDEN_CHECK_BOX, [\n\t\t\t\t\t\t\tinstance.get(STR_HOST).ns('rowIdsFileEntry')\n\t\t\t\t\t\t]);\n\n\t\t\t\t\t\tif (displayStyle === CSS_ICON) {\n\t\t\t\t\t\t\tinvisibleEntry = instance._invisibleIconEntry;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tentryNode = invisibleEntry.clone();\n\n\t\t\t\t\t\tentryNode.append(hiddenCheckbox);\n\n\t\t\t\t\t\tvar entryLink = entryNode.one('a');\n\n\t\t\t\t\t\tvar entryTitle = entryLink;\n\n\t\t\t\t\t\tentryLink.attr('title', name);\n\n\t\t\t\t\t\tentryTitle.setContent(name);\n\n\t\t\t\t\t\tinstance._removeEmptyResultsMessage(searchContainer);\n\n\t\t\t\t\t\tvar searchContainerWrapper = A.one(\n\t\t\t\t\t\t\t'div.lfr-search-container-wrapper.main-content-body'\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tif (searchContainerWrapper) {\n\t\t\t\t\t\t\tsearchContainerWrapper.show();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tentryNode.attr({\n\t\t\t\t\t\t'data-title': name,\n\t\t\t\t\t\tid: A.guid()\n\t\t\t\t\t});\n\n\t\t\t\t\tif (displayStyle == CSS_ICON) {\n\t\t\t\t\t\tvar entryNodeWrapper = ANode.create(\n\t\t\t\t\t\t\tLang.sub(TPL_ENTRY_WRAPPER, {\n\t\t\t\t\t\t\t\ttitle: name\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tentryNodeWrapper.append(entryNode);\n\n\t\t\t\t\t\tentryNode = entryNodeWrapper;\n\t\t\t\t\t}\n\n\t\t\t\t\tentriesContainer.append(entryNode);\n\n\t\t\t\t\tentryNode.show().scrollIntoView();\n\n\t\t\t\t\treturn entryNode;\n\t\t\t\t},\n\n\t\t\t\t_createEntryRow(name, size) {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tvar searchContainerNode = instance._entriesContainer.one(\n\t\t\t\t\t\tSELECTOR_SEARCH_CONTAINER\n\t\t\t\t\t);\n\n\t\t\t\t\tvar searchContainer = Liferay.SearchContainer.get(\n\t\t\t\t\t\tsearchContainerNode.attr('id')\n\t\t\t\t\t);\n\n\t\t\t\t\tvar columnValues = instance._columnNames.map(\n\t\t\t\t\t\t(item, index) => {\n\t\t\t\t\t\t\tvar value = STR_BLANK;\n\n\t\t\t\t\t\t\tif (item == STR_NAME) {\n\t\t\t\t\t\t\t\tvalue = sub(TPL_ENTRY_ROW_TITLE, [name]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (item == STR_SIZE) {\n\t\t\t\t\t\t\t\tvalue = Liferay.Util.formatStorage(size);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (item == 'downloads') {\n\t\t\t\t\t\t\t\tvalue = '0';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (index === 0) {\n\t\t\t\t\t\t\t\tvalue = sub(TPL_HIDDEN_CHECK_BOX, [\n\t\t\t\t\t\t\t\t\tinstance.get(STR_HOST).ns('rowIdsFileEntry')\n\t\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\n\t\t\t\t\tvar row = searchContainer.addRow(columnValues, A.guid());\n\n\t\t\t\t\trow.attr('data-draggable', true);\n\n\t\t\t\t\treturn row;\n\t\t\t\t},\n\n\t\t\t\t_createOverlay(target, background) {\n\t\t\t\t\tvar overlay = new A.OverlayMask({\n\t\t\t\t\t\tbackground: background || null,\n\t\t\t\t\t\ttarget\n\t\t\t\t\t}).render();\n\n\t\t\t\t\toverlay\n\t\t\t\t\t\t.get(STR_BOUNDING_BOX)\n\t\t\t\t\t\t.addClass('portlet-document-library-upload-mask');\n\n\t\t\t\t\treturn overlay;\n\t\t\t\t},\n\n\t\t\t\t_createProgressBar(target) {\n\t\t\t\t\tvar height = target.height() / 5;\n\n\t\t\t\t\tvar width = target.width() * 0.8;\n\n\t\t\t\t\treturn new A.ProgressBar({\n\t\t\t\t\t\theight,\n\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\tcomplete() {\n\t\t\t\t\t\t\t\tthis.set(STR_LABEL, 'complete!');\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tvalueChange(event) {\n\t\t\t\t\t\t\t\tthis.set(STR_LABEL, event.newVal + '%');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\twidth\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\t_createUploadStatus(target, file) {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tvar overlay = instance._createOverlay(target);\n\t\t\t\t\tvar progressBar = instance._createProgressBar(target);\n\n\t\t\t\t\toverlay.show();\n\n\t\t\t\t\tif (file) {\n\t\t\t\t\t\tfile.overlay = overlay;\n\t\t\t\t\t\tfile.progressBar = progressBar;\n\t\t\t\t\t\tfile.target = target;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\ttarget.overlay = overlay;\n\t\t\t\t\t\ttarget.progressBar = progressBar;\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t_decodeURI(val) {\n\t\t\t\t\treturn decodeURI(val);\n\t\t\t\t},\n\n\t\t\t\t_destroyEntry() {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tvar currentUploadData = instance._getCurrentUploadData();\n\n\t\t\t\t\tvar fileList = currentUploadData.fileList;\n\n\t\t\t\t\tif (!currentUploadData.folder) {\n\t\t\t\t\t\tfileList.forEach(item => {\n\t\t\t\t\t\t\titem.overlay.destroy();\n\n\t\t\t\t\t\t\titem.progressBar.destroy();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tAArray.invoke(fileList, 'destroy');\n\t\t\t\t},\n\n\t\t\t\t_detachSubscriptions() {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tvar handles = instance._handles;\n\n\t\t\t\t\tAArray.invoke(handles, 'detach');\n\n\t\t\t\t\thandles.length = 0;\n\t\t\t\t},\n\n\t\t\t\t_detectFolderUploadError(event, data) {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tvar response = instance._getUploadResponse(event.data);\n\n\t\t\t\t\tif (response.error) {\n\t\t\t\t\t\tvar file = event.file;\n\n\t\t\t\t\t\tfile.errorMessage = response.message;\n\n\t\t\t\t\t\tdata.invalidFiles.push(file);\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t_displayEntryError(node, message, displayStyle) {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tif (displayStyle == STR_LIST) {\n\t\t\t\t\t\tvar imageIcon = node.one(SELECTOR_IMAGE_ICON);\n\n\t\t\t\t\t\timageIcon.attr(\n\t\t\t\t\t\t\t'src',\n\t\t\t\t\t\t\tPATH_THEME_IMAGES + '/common/close.png'\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tnode.addClass(CSS_UPLOAD_ERROR);\n\t\t\t\t\t}\n\n\t\t\t\t\tinstance._displayError(node, message);\n\t\t\t\t},\n\n\t\t\t\t_displayError(node, message) {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tnode.attr('data-message', message);\n\n\t\t\t\t\tvar tooltipDelegate = instance._tooltipDelegate;\n\n\t\t\t\t\tif (!tooltipDelegate) {\n\t\t\t\t\t\ttooltipDelegate = new A.TooltipDelegate({\n\t\t\t\t\t\t\tformatter(val) {\n\t\t\t\t\t\t\t\treturn instance._formatTooltip(val, this);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttrigger: '.app-view-entry.upload-error',\n\t\t\t\t\t\t\tvisible: false\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tinstance._tooltipDelegate = tooltipDelegate;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn node;\n\t\t\t\t},\n\n\t\t\t\t_displayResult(node, displayStyle, error) {\n\t\t\t\t\tvar resultsNode = node;\n\n\t\t\t\t\tif (resultsNode) {\n\t\t\t\t\t\tvar uploadResultClass = CSS_UPLOAD_SUCCESS;\n\n\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\tresultsNode\n\t\t\t\t\t\t\t\t.removeClass(CSS_UPLOAD_ERROR)\n\t\t\t\t\t\t\t\t.removeClass(CSS_UPLOAD_WARNING);\n\n\t\t\t\t\t\t\tif (error === true) {\n\t\t\t\t\t\t\t\tuploadResultClass = CSS_UPLOAD_ERROR;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (error == ERROR_RESULTS_MIXED) {\n\t\t\t\t\t\t\t\tuploadResultClass = CSS_UPLOAD_WARNING;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tresultsNode.addClass(uploadResultClass);\n\t\t\t\t\t\tresultsNode.addClass(CSS_ENTRY_DISPLAY_STYLE);\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t_formatTooltip(val, tooltip) {\n\t\t\t\t\ttooltip.set('zIndex', 2);\n\n\t\t\t\t\tvar node = tooltip.get('trigger');\n\n\t\t\t\t\treturn node.attr('data-message');\n\t\t\t\t},\n\n\t\t\t\t_getCurrentUploadData() {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tvar dataSet = instance._getDataSet();\n\n\t\t\t\t\treturn dataSet.get(STR_FIRST);\n\t\t\t\t},\n\n\t\t\t\t_getDataSet() {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tvar dataSet = instance._dataSet;\n\n\t\t\t\t\tif (!dataSet) {\n\t\t\t\t\t\tdataSet = new A.DataSet();\n\n\t\t\t\t\t\tinstance._dataSet = dataSet;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn dataSet;\n\t\t\t\t},\n\n\t\t\t\t_getDisplayStyle(style) {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tvar displayStyle = instance._displayStyle;\n\n\t\t\t\t\tif (style) {\n\t\t\t\t\t\tdisplayStyle = style == displayStyle;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn displayStyle;\n\t\t\t\t},\n\n\t\t\t\t_getEmptyMessage() {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tvar emptyMessage = instance._emptyMessage;\n\n\t\t\t\t\tif (!emptyMessage) {\n\t\t\t\t\t\temptyMessage = instance._entriesContainer.one(\n\t\t\t\t\t\t\tSELECTOR_ENTRIES_EMPTY\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tinstance._emptyMessage = emptyMessage;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn emptyMessage;\n\t\t\t\t},\n\n\t\t\t\t_getFolderEntryNode(target) {\n\t\t\t\t\tvar folderEntry;\n\n\t\t\t\t\tvar overlayContentBox = target.hasClass('overlay-content');\n\n\t\t\t\t\tif (overlayContentBox) {\n\t\t\t\t\t\tvar overlay = A.Widget.getByNode(target);\n\n\t\t\t\t\t\tfolderEntry = overlay._originalConfig.target;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (target.attr('data-folder') === 'true') {\n\t\t\t\t\t\t\tfolderEntry = target;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!folderEntry) {\n\t\t\t\t\t\t\tfolderEntry = target.ancestor(\n\t\t\t\t\t\t\t\tSELECTOR_ENTRY_LINK + SELECTOR_DATA_FOLDER\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!folderEntry) {\n\t\t\t\t\t\t\tfolderEntry = target.ancestor(\n\t\t\t\t\t\t\t\tSELECTOR_DATA_FOLDER_DATA_TITLE\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn folderEntry;\n\t\t\t\t},\n\n\t\t\t\t_getMediaThumbnail(fileName) {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tvar thumbnailName = STR_THUMBNAIL_DEFAULT;\n\n\t\t\t\t\tif (REGEX_IMAGE.test(fileName)) {\n\t\t\t\t\t\tthumbnailName = sub(TPL_IMAGE_THUMBNAIL, [\n\t\t\t\t\t\t\tinstance._scopeGroupId,\n\t\t\t\t\t\t\tinstance.get(STR_FOLDER_ID),\n\t\t\t\t\t\t\tfileName\n\t\t\t\t\t\t]);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tLString.endsWith(\n\t\t\t\t\t\t\t\tfileName.toLowerCase(),\n\t\t\t\t\t\t\t\tSTR_EXTENSION_PDF\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tthumbnailName = STR_THUMBNAIL_PDF;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (REGEX_AUDIO.test(fileName)) {\n\t\t\t\t\t\t\tthumbnailName = STR_THUMBNAIL_AUDIO;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (REGEX_VIDEO.test(fileName)) {\n\t\t\t\t\t\t\tthumbnailName = STR_THUMBNAIL_VIDEO;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (REGEX_COMPRESSED.test(fileName)) {\n\t\t\t\t\t\t\tthumbnailName = STR_THUMBNAIL_COMPRESSED;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthumbnailName = STR_THUMBNAIL_PATH + thumbnailName;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn thumbnailName;\n\t\t\t\t},\n\n\t\t\t\t_getNavigationOverlays() {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tvar navigationOverlays = instance._navigationOverlays;\n\n\t\t\t\t\tif (!navigationOverlays) {\n\t\t\t\t\t\tnavigationOverlays = [];\n\n\t\t\t\t\t\tvar createNavigationOverlay = function(target) {\n\t\t\t\t\t\t\tif (target) {\n\t\t\t\t\t\t\t\tvar overlay = instance._createOverlay(\n\t\t\t\t\t\t\t\t\ttarget,\n\t\t\t\t\t\t\t\t\tSTR_NAVIGATION_OVERLAY_BACKGROUND\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\tnavigationOverlays.push(overlay);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tvar entriesContainer = instance.get('entriesContainer');\n\n\t\t\t\t\t\tcreateNavigationOverlay(\n\t\t\t\t\t\t\tentriesContainer.one(\n\t\t\t\t\t\t\t\t'.app-view-taglib.lfr-header-row'\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\t\tcreateNavigationOverlay(\n\t\t\t\t\t\t\tinstance.get('.searchcontainer')\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tinstance._navigationOverlays = navigationOverlays;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn navigationOverlays;\n\t\t\t\t},\n\n\t\t\t\t_getTargetFolderId(target) {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tvar folderEntry = instance._getFolderEntryNode(target);\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t(folderEntry &&\n\t\t\t\t\t\t\tLang.toInt(folderEntry.attr('data-folder-id'))) ||\n\t\t\t\t\t\tinstance.get(STR_FOLDER_ID)\n\t\t\t\t\t);\n\t\t\t\t},\n\n\t\t\t\t_getUploadResponse(responseData) {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tvar error;\n\t\t\t\t\tvar message;\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tresponseData = JSON.parse(responseData);\n\t\t\t\t\t}\n\t\t\t\t\tcatch (e) {}\n\n\t\t\t\t\tif (Lang.isObject(responseData)) {\n\t\t\t\t\t\terror =\n\t\t\t\t\t\t\tresponseData.status &&\n\t\t\t\t\t\t\tresponseData.status >= 490 &&\n\t\t\t\t\t\t\tresponseData.status < 500;\n\n\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\tmessage = responseData.message;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tmessage =\n\t\t\t\t\t\t\t\tinstance.get(STR_HOST).ns('fileEntryId=') +\n\t\t\t\t\t\t\t\tresponseData.fileEntryId;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\terror,\n\t\t\t\t\t\tmessage\n\t\t\t\t\t};\n\t\t\t\t},\n\n\t\t\t\t_getUploadStatus(key) {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tvar dataSet = instance._getDataSet();\n\n\t\t\t\t\treturn dataSet.item(String(key));\n\t\t\t\t},\n\n\t\t\t\t_getUploadURL(folderId) {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tvar uploadURL = instance._uploadURL;\n\n\t\t\t\t\tif (!uploadURL) {\n\t\t\t\t\t\tvar redirect = instance.get('redirect');\n\n\t\t\t\t\t\tuploadURL = instance.get('uploadURL');\n\n\t\t\t\t\t\tinstance._uploadURL = Liferay.Util.addParams(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tredirect,\n\t\t\t\t\t\t\t\tts: Date.now()\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tuploadURL\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn sub(uploadURL, {\n\t\t\t\t\t\tfolderId\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\t_getUploader() {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tvar uploader = instance._uploader;\n\n\t\t\t\t\tif (!uploader) {\n\t\t\t\t\t\tuploader = new A.Uploader({\n\t\t\t\t\t\t\tappendNewFiles: false,\n\t\t\t\t\t\t\tfileFieldName: 'file',\n\t\t\t\t\t\t\tmultipleFiles: true,\n\t\t\t\t\t\t\tsimLimit: 1\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tvar navigationOverlays = instance._getNavigationOverlays();\n\n\t\t\t\t\t\tuploader.on('uploadstart', () => {\n\t\t\t\t\t\t\tAArray.invoke(navigationOverlays, 'show');\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tuploader.after('alluploadscomplete', () => {\n\t\t\t\t\t\t\tAArray.invoke(navigationOverlays, 'hide');\n\n\t\t\t\t\t\t\tvar emptyMessage = instance._getEmptyMessage();\n\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\temptyMessage &&\n\t\t\t\t\t\t\t\t!emptyMessage.hasClass('hide')\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\temptyMessage.hide(true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tuploader.get(STR_BOUNDING_BOX).hide();\n\n\t\t\t\t\t\tuploader.render();\n\n\t\t\t\t\t\tuploader.after(\n\t\t\t\t\t\t\t'alluploadscomplete',\n\t\t\t\t\t\t\tinstance._startNextUpload,\n\t\t\t\t\t\t\tinstance\n\t\t\t\t\t\t);\n\t\t\t\t\t\tuploader.after(\n\t\t\t\t\t\t\t'fileselect',\n\t\t\t\t\t\t\tinstance._onFileSelect,\n\t\t\t\t\t\t\tinstance\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tinstance._uploader = uploader;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn uploader;\n\t\t\t\t},\n\n\t\t\t\t_isUploading() {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tvar uploader = instance._uploader;\n\n\t\t\t\t\tvar queue = uploader && uploader.queue;\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t!!queue &&\n\t\t\t\t\t\t(queue.queuedFiles.length > 0 ||\n\t\t\t\t\t\t\tqueue.numberOfUploads > 0 ||\n\t\t\t\t\t\t\t!A.Object.isEmpty(queue.currentFiles)) &&\n\t\t\t\t\t\tqueue._currentState == UploaderQueue.UPLOADING\n\t\t\t\t\t);\n\t\t\t\t},\n\n\t\t\t\t_onDataRequest(event) {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tif (instance._isUploading()) {\n\t\t\t\t\t\tevent.halt();\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t_onFileSelect(event) {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tvar target = event.details[0].target;\n\n\t\t\t\t\tvar filesPartition = instance._validateFiles(\n\t\t\t\t\t\tevent.fileList\n\t\t\t\t\t);\n\n\t\t\t\t\tinstance._updateStatusUI(target, filesPartition);\n\n\t\t\t\t\tinstance._queueSelectedFiles(target, filesPartition);\n\t\t\t\t},\n\n\t\t\t\t_positionProgressBar(overlay, progressBar) {\n\t\t\t\t\tvar progressBarBoundingBox = progressBar.get(\n\t\t\t\t\t\tSTR_BOUNDING_BOX\n\t\t\t\t\t);\n\n\t\t\t\t\tprogressBar.render(overlay.get(STR_BOUNDING_BOX));\n\n\t\t\t\t\tprogressBarBoundingBox.center(overlay.get(STR_CONTENT_BOX));\n\t\t\t\t},\n\n\t\t\t\t_queueSelectedFiles(target, filesPartition) {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tvar key = instance._getTargetFolderId(target);\n\n\t\t\t\t\tvar keyData = instance._getUploadStatus(key);\n\n\t\t\t\t\tvar validFiles = filesPartition.matches;\n\n\t\t\t\t\tif (keyData) {\n\t\t\t\t\t\tinstance._updateDataSetEntry(key, keyData, validFiles);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tvar dataSet = instance._getDataSet();\n\n\t\t\t\t\t\tvar folderNode = null;\n\n\t\t\t\t\t\tvar folder = key !== instance.get(STR_FOLDER_ID);\n\n\t\t\t\t\t\tif (folder) {\n\t\t\t\t\t\t\tfolderNode = instance._getFolderEntryNode(target);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdataSet.add(key, {\n\t\t\t\t\t\t\tfileList: validFiles,\n\t\t\t\t\t\t\tfolder,\n\t\t\t\t\t\t\tfolderId: key,\n\t\t\t\t\t\t\tinvalidFiles: filesPartition.rejects,\n\t\t\t\t\t\t\ttarget: folderNode\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!instance._isUploading()) {\n\t\t\t\t\t\tinstance._startUpload();\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t_removeEmptyResultsMessage(searchContainer) {\n\t\t\t\t\tvar id = searchContainer.getAttribute('id');\n\n\t\t\t\t\tvar emptyResultsMessage = A.one(\n\t\t\t\t\t\t'#' + id + 'EmptyResultsMessage'\n\t\t\t\t\t);\n\n\t\t\t\t\tif (emptyResultsMessage) {\n\t\t\t\t\t\temptyResultsMessage.hide();\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t_showFileUploadComplete(event, displayStyle) {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tvar file = event.file;\n\n\t\t\t\t\tvar fileNode = file.target;\n\n\t\t\t\t\tvar response = instance._getUploadResponse(event.data);\n\n\t\t\t\t\tif (response) {\n\t\t\t\t\t\tvar hasErrors = !!response.error;\n\n\t\t\t\t\t\tif (hasErrors) {\n\t\t\t\t\t\t\tinstance._displayEntryError(\n\t\t\t\t\t\t\t\tfileNode,\n\t\t\t\t\t\t\t\tresponse.message,\n\t\t\t\t\t\t\t\tdisplayStyle\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tvar displayStyleList = displayStyle == STR_LIST;\n\n\t\t\t\t\t\t\tvar fileEntryId = JSON.parse(event.data)\n\t\t\t\t\t\t\t\t.fileEntryId;\n\n\t\t\t\t\t\t\tif (!displayStyleList) {\n\t\t\t\t\t\t\t\tinstance._updateThumbnail(fileNode, file.name);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tinstance._updateFileLink(\n\t\t\t\t\t\t\t\tfileNode,\n\t\t\t\t\t\t\t\tresponse.message,\n\t\t\t\t\t\t\t\tdisplayStyleList\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tinstance._updateFileHiddenInput(\n\t\t\t\t\t\t\t\tfileNode,\n\t\t\t\t\t\t\t\tfileEntryId\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tinstance._displayResult(\n\t\t\t\t\t\t\tfileNode,\n\t\t\t\t\t\t\tdisplayStyle,\n\t\t\t\t\t\t\thasErrors\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tfile.overlay.hide();\n\t\t\t\t},\n\n\t\t\t\t_showFileUploadProgress(event) {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tinstance._updateProgress(\n\t\t\t\t\t\tevent.file.progressBar,\n\t\t\t\t\t\tevent.percentLoaded\n\t\t\t\t\t);\n\t\t\t\t},\n\n\t\t\t\t_showFileUploadStarting(event) {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tvar file = event.file;\n\n\t\t\t\t\tinstance._positionProgressBar(\n\t\t\t\t\t\tfile.overlay,\n\t\t\t\t\t\tfile.progressBar\n\t\t\t\t\t);\n\t\t\t\t},\n\n\t\t\t\t_showFolderUploadComplete(_event, uploadData, displayStyle) {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tvar folderEntry = uploadData.target;\n\t\t\t\t\tvar invalidFiles = uploadData.invalidFiles;\n\t\t\t\t\tvar totalFilesLength = uploadData.fileList.length;\n\n\t\t\t\t\tvar invalidFilesLength = invalidFiles.length;\n\n\t\t\t\t\tvar hasErrors = invalidFilesLength !== 0;\n\n\t\t\t\t\tif (hasErrors && invalidFilesLength !== totalFilesLength) {\n\t\t\t\t\t\thasErrors = ERROR_RESULTS_MIXED;\n\t\t\t\t\t}\n\n\t\t\t\t\tinstance._displayResult(\n\t\t\t\t\t\tfolderEntry,\n\t\t\t\t\t\tdisplayStyle,\n\t\t\t\t\t\thasErrors\n\t\t\t\t\t);\n\n\t\t\t\t\tif (hasErrors) {\n\t\t\t\t\t\tinstance._displayError(\n\t\t\t\t\t\t\tfolderEntry,\n\t\t\t\t\t\t\tTPL_ERROR_FOLDER.parse({\n\t\t\t\t\t\t\t\tinvalidFiles,\n\t\t\t\t\t\t\t\tinvalidFilesLength,\n\t\t\t\t\t\t\t\tvalidFilesLength:\n\t\t\t\t\t\t\t\t\ttotalFilesLength - invalidFilesLength\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tfolderEntry.overlay.hide();\n\t\t\t\t},\n\n\t\t\t\t_showFolderUploadProgress(event, uploadData) {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tinstance._updateProgress(\n\t\t\t\t\t\tuploadData.target.progressBar,\n\t\t\t\t\t\tevent.percentLoaded\n\t\t\t\t\t);\n\t\t\t\t},\n\n\t\t\t\t_showFolderUploadStarting(_event, uploadData) {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tvar target = uploadData.target;\n\n\t\t\t\t\tinstance._positionProgressBar(\n\t\t\t\t\t\ttarget.overlay,\n\t\t\t\t\t\ttarget.progressBar\n\t\t\t\t\t);\n\t\t\t\t},\n\n\t\t\t\t_startNextUpload() {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tinstance._destroyEntry();\n\n\t\t\t\t\tvar dataSet = instance._getDataSet();\n\n\t\t\t\t\tdataSet.removeAt(0);\n\n\t\t\t\t\tif (dataSet.length) {\n\t\t\t\t\t\tinstance._startUpload();\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t_startUpload() {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tvar uploadData = instance._getCurrentUploadData();\n\n\t\t\t\t\tvar fileList = uploadData.fileList;\n\n\t\t\t\t\tvar uploader = instance._getUploader();\n\n\t\t\t\t\tif (fileList.length) {\n\t\t\t\t\t\tvar uploadURL = instance._getUploadURL(\n\t\t\t\t\t\t\tuploadData.folderId\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tinstance._attachSubscriptions(uploadData);\n\n\t\t\t\t\t\tuploader.uploadThese(fileList, uploadURL);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tuploader.fire('alluploadscomplete');\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t_updateDataSetEntry(key, data, unmergedData) {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tvar currentUploadData = instance._getCurrentUploadData();\n\n\t\t\t\t\tif (currentUploadData.folderId === key) {\n\t\t\t\t\t\tinstance._addFilesToQueueBottom(unmergedData);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tinstance._combineFileLists(data.fileList, unmergedData);\n\n\t\t\t\t\t\tvar dataSet = instance._getDataSet();\n\n\t\t\t\t\t\tdataSet.replace(key, data);\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t_updateFileHiddenInput(node, id) {\n\t\t\t\t\tvar inputNode = node.one('input');\n\n\t\t\t\t\tif (inputNode) {\n\t\t\t\t\t\tinputNode.val(id);\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t_updateFileLink(node, id, displayStyleList) {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tvar selector = SELECTOR_ENTRY_LINK;\n\n\t\t\t\t\tif (displayStyleList) {\n\t\t\t\t\t\tselector =\n\t\t\t\t\t\t\tSELECTOR_ENTRY_DISPLAY_STYLE +\n\t\t\t\t\t\t\tSTR_SPACE +\n\t\t\t\t\t\t\tSELECTOR_TAGLIB_ICON;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar link = node.all(selector);\n\n\t\t\t\t\tif (link.size()) {\n\t\t\t\t\t\tlink.attr(\n\t\t\t\t\t\t\t'href',\n\t\t\t\t\t\t\tLiferay.Util.addParams(\n\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\tinstance.get('viewFileEntryURL')\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t_updateProgress(progressBar, value) {\n\t\t\t\t\tprogressBar.set('value', Math.ceil(value));\n\t\t\t\t},\n\n\t\t\t\t_updateStatusUI(target, filesPartition) {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tvar folderId = instance._getTargetFolderId(target);\n\n\t\t\t\t\tvar folder = folderId !== instance.get(STR_FOLDER_ID);\n\n\t\t\t\t\tif (folder) {\n\t\t\t\t\t\tvar folderEntryNode = instance._getFolderEntryNode(\n\t\t\t\t\t\t\ttarget\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tvar folderEntryNodeOverlay = folderEntryNode.overlay;\n\n\t\t\t\t\t\tif (folderEntryNodeOverlay) {\n\t\t\t\t\t\t\tfolderEntryNodeOverlay.show();\n\n\t\t\t\t\t\t\tinstance._updateProgress(\n\t\t\t\t\t\t\t\tfolderEntryNode.progressBar,\n\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tinstance._createUploadStatus(folderEntryNode);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfolderEntryNode.removeClass(CSS_ACTIVE_AREA);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tvar displayStyle = instance._getDisplayStyle();\n\n\t\t\t\t\t\tfilesPartition.matches.map(file => {\n\t\t\t\t\t\t\tvar entryNode = instance._createEntryNode(\n\t\t\t\t\t\t\t\tfile.name,\n\t\t\t\t\t\t\t\tfile.size,\n\t\t\t\t\t\t\t\tdisplayStyle\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tinstance._createUploadStatus(entryNode, file);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tfilesPartition.rejects.map(file => {\n\t\t\t\t\t\t\tvar entryNode = instance._createEntryNode(\n\t\t\t\t\t\t\t\tfile.name,\n\t\t\t\t\t\t\t\tfile.size,\n\t\t\t\t\t\t\t\tdisplayStyle\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tinstance._displayEntryError(\n\t\t\t\t\t\t\t\tentryNode,\n\t\t\t\t\t\t\t\tfile.errorMessage,\n\t\t\t\t\t\t\t\tinstance._getDisplayStyle()\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t_updateThumbnail(node, fileName) {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tvar imageNode = node.one('img');\n\n\t\t\t\t\tvar thumbnailPath = instance._getMediaThumbnail(fileName);\n\n\t\t\t\t\timageNode.attr('src', thumbnailPath);\n\n\t\t\t\t\tif (instance._getDisplayStyle() === CSS_ICON) {\n\t\t\t\t\t\tvar divNode = imageNode.ancestor('div');\n\n\t\t\t\t\t\tdivNode.setStyle(\n\t\t\t\t\t\t\t'backgroundImage',\n\t\t\t\t\t\t\t'url(\"' + thumbnailPath + '\")'\n\t\t\t\t\t\t);\n\t\t\t\t\t\tdivNode.setStyle('backgroundPosition', 'center');\n\t\t\t\t\t\tdivNode.setStyle('backgroundRepeat', 'no-repeat');\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t_validateFiles(data) {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tvar maxFileSize = instance._maxFileSize;\n\n\t\t\t\t\treturn AArray.partition(data, item => {\n\t\t\t\t\t\tvar errorMessage;\n\n\t\t\t\t\t\tvar size = item.get(STR_SIZE) || 0;\n\n\t\t\t\t\t\tvar strings = instance._strings;\n\n\t\t\t\t\t\tif (maxFileSize !== 0 && size > maxFileSize) {\n\t\t\t\t\t\t\terrorMessage = sub(strings.invalidFileSize, [\n\t\t\t\t\t\t\t\tLiferay.Util.formatStorage(\n\t\t\t\t\t\t\t\t\tinstance._maxFileSize\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (size === 0) {\n\t\t\t\t\t\t\terrorMessage = strings.zeroByteFile;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\titem.errorMessage = errorMessage;\n\t\t\t\t\t\titem.size = size;\n\t\t\t\t\t\titem.name = item.get(STR_NAME);\n\n\t\t\t\t\t\treturn !errorMessage;\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tdestructor() {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tif (instance._dataSet) {\n\t\t\t\t\t\tinstance._dataSet.destroy();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (instance._navigationOverlays) {\n\t\t\t\t\t\tAArray.invoke(instance._navigationOverlays, 'destroy');\n\t\t\t\t\t}\n\n\t\t\t\t\tif (instance._uploader) {\n\t\t\t\t\t\tinstance._uploader.destroy();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (instance._tooltipDelegate) {\n\t\t\t\t\t\tinstance._tooltipDelegate.destroy();\n\t\t\t\t\t}\n\n\t\t\t\t\tinstance._detachSubscriptions();\n\n\t\t\t\t\tnew A.EventHandle(instance._eventHandles).detach();\n\t\t\t\t},\n\n\t\t\t\tinitializer() {\n\t\t\t\t\tvar instance = this;\n\n\t\t\t\t\tvar appViewEntryTemplates = instance.get(\n\t\t\t\t\t\t'appViewEntryTemplates'\n\t\t\t\t\t);\n\n\t\t\t\t\tinstance._columnNames = instance.get('columnNames');\n\t\t\t\t\tinstance._dimensions = instance.get('dimensions');\n\t\t\t\t\tinstance._displayStyle = instance.get('displayStyle');\n\t\t\t\t\tinstance._entriesContainer = instance.get(\n\t\t\t\t\t\t'entriesContainer'\n\t\t\t\t\t);\n\t\t\t\t\tinstance._maxFileSize = instance.get('maxFileSize');\n\t\t\t\t\tinstance._scopeGroupId = instance.get('scopeGroupId');\n\n\t\t\t\t\tinstance._handles = [];\n\n\t\t\t\t\tinstance._invisibleDescriptiveEntry = appViewEntryTemplates.one(\n\t\t\t\t\t\tSELECTOR_ENTRY_DISPLAY_STYLE +\n\t\t\t\t\t\t\tSELECTOR_DISPLAY_DESCRIPTIVE\n\t\t\t\t\t);\n\t\t\t\t\tinstance._invisibleIconEntry = appViewEntryTemplates.one(\n\t\t\t\t\t\tSELECTOR_ENTRY_DISPLAY_STYLE + SELECTOR_DISPLAY_ICON\n\t\t\t\t\t);\n\n\t\t\t\t\tinstance._strings = {\n\t\t\t\t\t\tinvalidFileSize: Liferay.Language.get(\n\t\t\t\t\t\t\t'please-enter-a-file-with-a-valid-file-size-no-larger-than-x'\n\t\t\t\t\t\t),\n\t\t\t\t\t\tzeroByteFile: Liferay.Language.get(\n\t\t\t\t\t\t\t'the-file-contains-no-data-and-cannot-be-uploaded.-please-use-the-classic-uploader'\n\t\t\t\t\t\t)\n\t\t\t\t\t};\n\n\t\t\t\t\tinstance._bindDragDropUI();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tLiferay.DocumentLibraryUpload = DocumentLibraryUpload;\n\t},\n\t'',\n\t{\n\t\trequires: [\n\t\t\t'aui-component',\n\t\t\t'aui-data-set-deprecated',\n\t\t\t'aui-overlay-manager-deprecated',\n\t\t\t'aui-overlay-mask-deprecated',\n\t\t\t'aui-parse-content',\n\t\t\t'aui-progressbar',\n\t\t\t'aui-template-deprecated',\n\t\t\t'aui-tooltip',\n\t\t\t'liferay-search-container',\n\t\t\t'querystring-parse-simple',\n\t\t\t'uploader'\n\t\t]\n\t}\n);\n"],"file":"upload.js"}